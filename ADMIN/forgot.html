<!DOCTYPE html>
<html lang="en">

<head>
    <title>Khôi phục mật khẩu | Website quản trị v2.0</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
    <link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
    <link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
    <link rel="stylesheet" type="text/css" href="css/util.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
<div class="limiter">
    <div class="container-login100">
        <div class="wrap-login100">
            <div class="login100-pic js-tilt" data-tilt>
                <img src="images/fg-img.png" alt="IMG">
            </div>
            <form class="login100-form validate-form" id="resetPasswordForm">
    <span class="login100-form-title">
        <b>KHÔI PHỤC MẬT KHẨU</b>
    </span>
                <div class="wrap-input100 validate-input"
                     data-validate="Bạn cần nhập đúng thông tin như: ex@abc.xyz">
                    <input class="input100" type="text" placeholder="Nhập email" name="emailInput"
                           id="emailInput" value=""/>
                    <span class="focus-input100"></span>
                    <br>
                    <input class="input100" type="password" placeholder="New Password" id="forgotPassword" value="">
                </div>
                <div class="container-login100-form-btn">
                    <input type="submit" value="Đổi mật khẩu" id="submitBtn">
                </div>
                <div class="text-center p-t-12">
                    <a class="txt2" href="/ADMIN/login.html">
                        Trở về đăng nhập
                    </a>
                </div>
            </form>

            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
            <script>
                $(document).ready(function() {
                    $('#resetPasswordForm').on('submit', function(event) {
                        event.preventDefault(); // Ngăn chặn việc gửi submit mặc định của form

                        var email = $('#emailInput').val();
                        var password = $('#forgotPassword').val();

                        var data = {
                            email: email,
                            password: password
                        };

                        $.ajax({
                            type: 'POST',
                            url: 'http://localhost:8080/api/auths/reset-password',
                            contentType: 'application/json',
                            data: JSON.stringify(data),
                            success: function(response) {
                                console.log('Thay đổi mật khẩu thành công!', response);
                                window.location.href = 'customer.html';
                            },
                            error: function(xhr, status, error) {
                                console.error('Thay đổi mật khẩu không thành công:', error);

                                if (xhr.status >= 400 && xhr.status < 500) {
                                    alert('Mật khẩu không hợp lệ');
                                } else if (xhr.status >= 500) {
                                    alert('Lỗi server');
                                }
                            }
                        });
                    });
                });
            </script>
            <div class="text-center p-t-70 txt2">
                Winz Fast<i class="far fa-copyright" aria-hidden="true"></i>
                <script type="text/javascript">document.write(new Date().getFullYear());</script>
                <a
                        class="txt2" href="https://www.facebook.com/truongvo.vd1503/"></a>
            </div>
            </form>
        </div>
    </div>
</div>
<!--===============================================================================================-->
<script src="/js/main.js"></script>
<!--===============================================================================================-->
<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/bootstrap/js/popper.js"></script>
<!--===============================================================================================-->
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->

</body>
</html>